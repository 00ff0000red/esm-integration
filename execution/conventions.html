<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Conventions &#8212; WebAssembly 1.0</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  false
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="top" title="WebAssembly 1.0" href="../index.html" />
    <link rel="up" title="Execution" href="index.html" />
    <link rel="next" title="Instructions" href="instructions.html" />
    <link rel="prev" title="Execution" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 10*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><script type="text/javascript">MathJax.Hub.Config({TeX: {MAXBUFFER: 30*1024}})</script><body role="document">
  <div class="document">
    
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/placeholder.jpg" alt="Logo"/>
            </a></p><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../introduction/index.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../syntax/index.html">Structure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../validation/index.html">Validation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Execution</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Conventions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#values">Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#addresses">Addresses</a></li>
<li class="toctree-l3"><a class="reference internal" href="#module-instances">Module Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#function-instances">Function Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#table-instances">Table Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memory-instances">Memory Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#global-instances">Global Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-instances">Export Instances</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-values">External Values</a></li>
<li class="toctree-l3"><a class="reference internal" href="#external-types">External Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-10">Store</a></li>
<li class="toctree-l3"><a class="reference internal" href="#index-11">Frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="#textual-notation">Textual Notation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#formal-notation">Formal Notation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="instructions.html">Instructions</a></li>
<li class="toctree-l2"><a class="reference internal" href="modules.html">Modules</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../binary/index.html">Binary Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix-properties/index.html">Appendix: Formal Properties</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix-algorithm/index.html">Appendix: Validation Algorithm</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix-textual/index.html">Appendix: Text Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../appendix-names/index.html">Appendix: Name Section</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../syntax/instrindex.html">Index of Instructions</a></li>
</ul>


<hr />
<ul>
    
    <li class="toctree-l1"><a href="../genindex.html">Index</a></li>
    
    <li class="toctree-l1"><a href="../_download/WebAssembly.pdf">Download as PDF</a></li>
    
</ul>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="conventions">
<span id="index-0"></span><h1>Conventions<a class="headerlink" href="#conventions" title="Permalink to this headline">¶</a></h1>
<div class="section" id="values">
<h2>Values<a class="headerlink" href="#values" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(value)} &amp; \href{../execution/conventions.html#syntax-val}{\mathit{val}} &amp;::=&amp;
  \href{../syntax/types.html#syntax-valtype}{\mathit{valtype}}.\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{const}}~c \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-globaladdr"><span id="syntax-memaddr"></span><span id="syntax-tableaddr"></span><span id="syntax-addr"></span></span></div>
<div class="section" id="addresses">
<span id="index-1"></span><h2>Addresses<a class="headerlink" href="#addresses" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(address)} &amp; \href{../execution/conventions.html#syntax-addr}{\mathit{addr}} &amp;::=&amp;
  0 ~|~ 1 ~|~ 2 ~|~ \dots \\
\def\mathdef17#1{{}}\mathdef17{(table address)} &amp; \href{../execution/conventions.html#syntax-tableaddr}{\mathit{tableaddr}} &amp;::=&amp;
  \href{../execution/conventions.html#syntax-addr}{\mathit{addr}} \\
\def\mathdef17#1{{}}\mathdef17{(memory address)} &amp; \href{../execution/conventions.html#syntax-memaddr}{\mathit{memaddr}} &amp;::=&amp;
  \href{../execution/conventions.html#syntax-addr}{\mathit{addr}} \\
\def\mathdef17#1{{}}\mathdef17{(global address)} &amp; \href{../execution/conventions.html#syntax-globaladdr}{\mathit{globaladdr}} &amp;::=&amp;
  \href{../execution/conventions.html#syntax-addr}{\mathit{addr}} \\
\end{array}\end{split}\]</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">A <em>memory address</em> denotes the abstract address of a memory <em>instance</em> in the store,
not an offset <em>in</em> a linear memory instance.</p>
</div>
<span class="target" id="syntax-moduleinst"></span></div>
<div class="section" id="module-instances">
<span id="index-2"></span><h2>Module Instances<a class="headerlink" href="#module-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(module instance)} &amp; \href{../execution/conventions.html#syntax-moduleinst}{\mathit{moduleinst}} &amp;::=&amp; \{
  \begin{array}[t]{l&#64;{~}ll}
  \mathsf{types} &amp; \href{../syntax/types.html#syntax-functype}{\mathit{functype}}^\ast, \\
  \mathsf{funcs} &amp; \href{../execution/conventions.html#syntax-funcinst}{\mathit{funcinst}}^\ast, \\
  \mathsf{tables} &amp; \href{../execution/conventions.html#syntax-tableaddr}{\mathit{tableaddr}}^\ast, \\
  \mathsf{mems} &amp; \href{../execution/conventions.html#syntax-memaddr}{\mathit{memaddr}}^\ast, \\
  \mathsf{globals} &amp; \href{../execution/conventions.html#syntax-globaladdr}{\mathit{globaladdr}}^\ast \\
  \mathsf{exports} &amp; \href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast ~\} \\
  \end{array}
\end{array}\end{split}\]</div>
<span class="target" id="syntax-funcinst"></span></div>
<div class="section" id="function-instances">
<span id="index-3"></span><h2>Function Instances<a class="headerlink" href="#function-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(function instance)} &amp; \href{../execution/conventions.html#syntax-funcinst}{\mathit{funcinst}} &amp;::=&amp;
  \{ \mathsf{module}~\href{../execution/conventions.html#syntax-moduleinst}{\mathit{moduleinst}}, \mathsf{func}~\href{../syntax/modules.html#syntax-func}{\mathit{func}} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-funcelem"><span id="syntax-tableinst"></span></span></div>
<div class="section" id="table-instances">
<span id="index-4"></span><h2>Table Instances<a class="headerlink" href="#table-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(table instance)} &amp; \href{../execution/conventions.html#syntax-tableinst}{\mathit{tableinst}} &amp;::=&amp;
  \{ \mathsf{elem}~(\href{../syntax/modules.html#syntax-func}{\mathit{func}}^?)^\ast, \mathsf{max}~\href{../syntax/values.html#syntax-int}{\def\mathdef22#1{{\mathit{uint}_{#1}}}\mathdef22{32}} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-meminst"></span></div>
<div class="section" id="memory-instances">
<span id="index-5"></span><h2>Memory Instances<a class="headerlink" href="#memory-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(memory instance)} &amp; \href{../execution/conventions.html#syntax-meminst}{\mathit{meminst}} &amp;::=&amp;
  \{ \mathsf{data}~\href{../syntax/values.html#syntax-byte}{\mathit{byte}}^\ast, \mathsf{max}~\href{../syntax/values.html#syntax-int}{\def\mathdef22#1{{\mathit{uint}_{#1}}}\mathdef22{32}} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="id2"></span></div>
<div class="section" id="global-instances">
<span id="index-6"></span><h2>Global Instances<a class="headerlink" href="#global-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(global instance)} &amp; \href{../execution/conventions.html#syntax-globalinst}{\mathit{globalinst}} &amp;::=&amp;
  \{ \mathsf{value}~\href{../execution/conventions.html#syntax-val}{\mathit{val}}, \href{../syntax/types.html#syntax-mut}{\mathsf{mut}}~\href{../syntax/types.html#syntax-mut}{\mathit{mut}} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-exportinst"></span></div>
<div class="section" id="export-instances">
<span id="index-7"></span><h2>Export Instances<a class="headerlink" href="#export-instances" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(export instance)} &amp; \href{../execution/conventions.html#syntax-exportinst}{\mathit{exportinst}} &amp;::=&amp;
  \{ \mathsf{name}~\href{../syntax/values.html#syntax-name}{\mathit{name}}, \mathsf{value}~\href{../execution/conventions.html#syntax-externval}{\mathit{externval}} \} \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-externval"></span></div>
<div class="section" id="external-values">
<span id="index-8"></span><h2>External Values<a class="headerlink" href="#external-values" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(external value)} &amp; \href{../execution/conventions.html#syntax-externval}{\mathit{externval}} &amp;::=&amp;
  \mathsf{func}~\href{../execution/conventions.html#syntax-funcinst}{\mathit{funcinst}} ~|~
  \mathsf{table}~\href{../execution/conventions.html#syntax-tableaddr}{\mathit{tableaddr}} ~|~
  \mathsf{mem}~\href{../execution/conventions.html#syntax-memaddr}{\mathit{memaddr}} ~|~
  \mathsf{global}~\href{../execution/conventions.html#syntax-globaladdr}{\mathit{globaladdr}} \\
\end{array}\end{split}\]</div>
<div class="section" id="id3">
<h3>Conventions<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h3>
<p>The following auxiliary notation is defined for sequences of external values, filtering out entries of a specific kind in an order-preserving fashion:</p>
<div class="math">
\[\begin{split}\begin{array}{lcl}
\href{../syntax/types.html#syntax-externtype}{\mathrm{funcs}}(\href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast) &amp;=&amp; [\href{../execution/conventions.html#syntax-funcinst}{\mathit{funcinst}} ~|~ \mathsf{func}~\href{../execution/conventions.html#syntax-funcinst}{\mathit{funcinst}} \in \href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{tables}}(\href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast) &amp;=&amp; [\href{../execution/conventions.html#syntax-tableaddr}{\mathit{tableaddr}} ~|~ \mathsf{table}~\href{../execution/conventions.html#syntax-tableaddr}{\mathit{tableaddr}} \in \href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{mems}}(\href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast) &amp;=&amp; [\href{../execution/conventions.html#syntax-memaddr}{\mathit{memaddr}} ~|~ \mathsf{mem}~\href{../execution/conventions.html#syntax-memaddr}{\mathit{memaddr}} \in \href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{globals}}(\href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast) &amp;=&amp; [\href{../execution/conventions.html#syntax-globaladdr}{\mathit{globaladdr}} ~|~ \mathsf{global}~\href{../execution/conventions.html#syntax-globaladdr}{\mathit{globaladdr}} \in \href{../execution/conventions.html#syntax-externval}{\mathit{externval}}^\ast] \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-externtype"></span></div>
</div>
<div class="section" id="external-types">
<span id="index-9"></span><h2>External Types<a class="headerlink" href="#external-types" title="Permalink to this headline">¶</a></h2>
<p><em>External types</em> classify imports and exports and their respective types.</p>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{external types} &amp; \href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}} &amp;::=&amp;
  \mathsf{func}~\href{../syntax/types.html#syntax-functype}{\mathit{functype}} ~|~ \\&amp;&amp;&amp;
  \mathsf{table}~\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}} ~|~ \\&amp;&amp;&amp;
  \mathsf{mem}~\href{../syntax/types.html#syntax-memtype}{\mathit{memtype}} ~|~ \\&amp;&amp;&amp;
  \mathsf{global}~\href{../syntax/types.html#syntax-globaltype}{\mathit{globaltype}} \\
\end{array}\end{split}\]</div>
<div class="section" id="id4">
<h3>Conventions<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h3>
<p>The following auxiliary notation is defined for sequences of external types, filtering out entries of a specific kind in an order-preserving fashion:</p>
<div class="math">
\[\begin{split}\begin{array}{lcl}
\href{../syntax/types.html#syntax-externtype}{\mathrm{funcs}}(\href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast) &amp;=&amp; [\href{../syntax/types.html#syntax-functype}{\mathit{functype}} ~|~ \mathsf{func}~\href{../syntax/types.html#syntax-functype}{\mathit{functype}} \in \href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{tables}}(\href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast) &amp;=&amp; [\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}} ~|~ \mathsf{table}~\href{../syntax/types.html#syntax-tabletype}{\mathit{tabletype}} \in \href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{mems}}(\href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast) &amp;=&amp; [\href{../syntax/types.html#syntax-memtype}{\mathit{memtype}} ~|~ \mathsf{mem}~\href{../syntax/types.html#syntax-memtype}{\mathit{memtype}} \in \href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast] \\
\href{../syntax/types.html#syntax-externtype}{\mathrm{globals}}(\href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast) &amp;=&amp; [\href{../syntax/types.html#syntax-globaltype}{\mathit{globaltype}} ~|~ \mathsf{global}~\href{../syntax/types.html#syntax-globaltype}{\mathit{globaltype}} \in \href{../execution/conventions.html#syntax-externtype}{\mathit{externtype}}^\ast] \\
\end{array}\end{split}\]</div>
<span class="target" id="syntax-store"><span id="store"></span></span></div>
</div>
<div class="section" id="index-10">
<span id="id5"></span><h2>Store<a class="headerlink" href="#index-10" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(store)} &amp; \href{../execution/conventions.html#syntax-store}{\mathit{store}} &amp;::=&amp; \{~
  \begin{array}[t]{l&#64;{~}ll}
  \mathsf{tables} &amp; \href{../execution/conventions.html#syntax-tableinst}{\mathit{tableinst}}^\ast, \\
  \mathsf{mems} &amp; \href{../execution/conventions.html#syntax-meminst}{\mathit{meminst}}^\ast, \\
  \mathsf{globals} &amp; \href{../execution/conventions.html#syntax-globalinst}{\mathit{globalinst}}^\ast ~\} \\
  \end{array}
\end{array}\end{split}\]</div>
<div class="section" id="convention">
<h3>Convention<a class="headerlink" href="#convention" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The meta variable <span class="math">\(S\)</span> ranges over stores where clear from context.</li>
</ul>
<span class="target" id="syntax-frame"><span id="frame"></span></span></div>
</div>
<div class="section" id="index-11">
<span id="id6"></span><h2>Frame<a class="headerlink" href="#index-11" title="Permalink to this headline">¶</a></h2>
<div class="math">
\[\begin{split}\begin{array}{llll}
\def\mathdef17#1{{}}\mathdef17{(store)} &amp; \href{../execution/conventions.html#syntax-frame}{\mathit{frame}} &amp;::=&amp; \{~
  \begin{array}[t]{l&#64;{~}ll}
  \mathsf{inst} &amp; \href{../execution/conventions.html#syntax-moduleinst}{\mathit{moduleinst}}, \\
  \mathsf{locals} &amp; \href{../execution/conventions.html#syntax-val}{\mathit{val}}^\ast ~\} \\
  \end{array}
\end{array}\end{split}\]</div>
<div class="section" id="id7">
<h3>Convention<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>The meta variable <span class="math">\(F\)</span> ranges over frames where clear from context.</li>
</ul>
</div>
</div>
<div class="section" id="textual-notation">
<h2>Textual Notation<a class="headerlink" href="#textual-notation" title="Permalink to this headline">¶</a></h2>
<p>Validation is specified by stylised rules for each relevant part of the <a class="reference internal" href="../syntax/conventions.html#syntax"><span class="std std-ref">abstract syntax</span></a>.
The rules not only state constraints defining when a phrase is valid,
they also classify it with a type.
A phrase <span class="math">\(A\)</span> is said to be &#8220;valid with type <span class="math">\(T\)</span>&#8221;,
if all constraints expressed by the respective rules are met.
The form of <span class="math">\(T\)</span> depends on what <span class="math">\(A\)</span> is.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">For example, if <span class="math">\(A\)</span> is a <a class="reference internal" href="../syntax/modules.html#syntax-func"><span class="std std-ref">function</span></a>,
then  <span class="math">\(T\)</span> is a <a class="reference internal" href="../syntax/types.html#syntax-functype"><span class="std std-ref">function type</span></a>;
for an <span class="math">\(A\)</span> that is a <a class="reference internal" href="../syntax/modules.html#syntax-global"><span class="std std-ref">global</span></a>,
<span class="math">\(T\)</span> is a <a class="reference internal" href="../syntax/types.html#syntax-globaltype"><span class="std std-ref">global type</span></a>;
and so on.</p>
</div>
<p>The rules implicitly assume a given <a class="reference internal" href="../validation/conventions.html#context"><span class="std std-ref">context</span></a> <span class="math">\(C\)</span>.
In some places, this context is locally extended to a context <span class="math">\(C'\)</span> with additional entries.
The formulation &#8220;Under context <span class="math">\(C'\)</span>, ... <em>statement</em> ...&#8221; is adopted to express that the following statement must apply under the assumptions embodied in the extended context.</p>
</div>
<div class="section" id="formal-notation">
<h2>Formal Notation<a class="headerlink" href="#formal-notation" title="Permalink to this headline">¶</a></h2>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">This section gives a brief explanation of the notation for specifying typing rules formally.
For the interested reader, a more thorough introduction can be found in respective text books. <a class="footnote-reference" href="#tapl" id="id8">[1]</a></p>
</div>
<p>The proposition that a phrase <span class="math">\(A\)</span> has a respective type <span class="math">\(T\)</span> is written <span class="math">\(A : T\)</span>.
In general, however, typing is dependent on the context <span class="math">\(C\)</span>.
To express this explicitly, the complete form is a <em>judgement</em> <span class="math">\(C \vdash A : T\)</span>,
which says that <span class="math">\(A : T\)</span> holds under the assumptions encoded in <span class="math">\(C\)</span>.</p>
<p>The formal typing rules use a standard approach for specifying type systems, rendering them into <em>deduction rules</em>.
Every rule has the following general form:</p>
<div class="math">
\[\frac{
  \mathit{premise}_1 \qquad \mathit{premise}_2 \qquad \dots \qquad \mathit{premise}_n
}{
  \mathit{conclusion}
}\]</div>
<p>Such a rule is read as a big implication: if all premises hold, then the conclusion holds.
Some rules have no premises; they are <em>axioms</em> whose conclusion holds unconditionally.
The conclusion always is a judgment <span class="math">\(C \vdash A : T\)</span>,
and there is one respective rule for each relevant construct <span class="math">\(A\)</span> of the abstract syntax.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>For example, the typing rule for the <a class="reference internal" href="../syntax/instructions.html#syntax-instr-numeric"><span class="std std-ref">instruction</span></a> <span class="math">\(\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}.\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{add}}\)</span> can be given as an axiom:</p>
<div class="math">
\[\frac{
}{
  C \vdash \href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}.\href{../syntax/instructions.html#syntax-instr-numeric}{\mathsf{add}} : [\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}~\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}] \to [\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}]
}\]</div>
<p>The instruction is always valid with type <span class="math">\([\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}~\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}] \to [\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}\)</span>]
(saying that it consumes two <span class="math">\(\href{../syntax/types.html#syntax-valtype}{\mathsf{i32}}\)</span> values and produces one),
independent from any side conditions.</p>
<p>An instruction like <span class="math">\(\href{../syntax/instructions.html#syntax-instr-variable}{\mathsf{get\_local}}\)</span> can be typed as follows:</p>
<div class="math">
\[\frac{
  C.\mathsf{local}[x] = t
}{
  C \vdash \href{../syntax/instructions.html#syntax-instr-variable}{\mathsf{get\_local}}~x : [] \to [t]
}\]</div>
<p>Here, the premise enforces that the immediate <a class="reference internal" href="../syntax/modules.html#syntax-localidx"><span class="std std-ref">local index</span></a> <span class="math">\(x\)</span> exists in the context.
The instruction produces a value of its respective type <span class="math">\(t\)</span>
(and does not consume any values).
If <span class="math">\(C.\mathsf{local}[x]\)</span> does not exist then the premise does not hold,
and the instruction is ill-typed.</p>
<p>Finally, a <a class="reference internal" href="../syntax/instructions.html#syntax-instr-control"><span class="std std-ref">structured</span></a> instruction requires
a recursive rule, where the premise is itself a typing judgement:</p>
<div class="math">
\[\frac{
  C,\mathsf{label}\,[t^?] \vdash \href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}^\ast : [] \to [t^?]
}{
  C \vdash \href{../syntax/instructions.html#syntax-instr-control}{\mathsf{block}}~[t^?]~\href{../syntax/instructions.html#syntax-instr}{\mathit{instr}}^\ast~\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{end}} : [] \to [t^?]
}\]</div>
<p class="last">A <span class="math">\(\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{block}}\)</span> instruction is only valid when the instruction sequence in its body is.
Moreover, the result type must match the block&#8217;s annotation <span class="math">\(t^?\)</span>.
If so, then the <span class="math">\(\href{../syntax/instructions.html#syntax-instr-control}{\mathsf{block}}\)</span> instruction has the same type as the body.
Inside the body an additional label of the same type is available,
which is expressed by locally extending the context <span class="math">\(C\)</span> with the additional label information for the premise.</p>
</div>
<table class="docutils footnote" frame="void" id="tapl" rules="none">
<colgroup><col class="label" /><col /></colgroup>
<tbody valign="top">
<tr><td class="label"><a class="fn-backref" href="#id8">[1]</a></td><td>For example: Benjamin Pierce. <a class="reference external" href="https://www.cis.upenn.edu/~bcpierce/tapl/">Types and Programming Languages</a>. The MIT Press 2002</td></tr>
</tbody>
</table>
</div>
</div>


          </div>
        </div>
      </div>
    <div class="clearer"></div>
  </div>
    <div class="footer">
      &copy;2017, WebAssembly Community Group.
      
    </div>

    

    
  </body>
</html>